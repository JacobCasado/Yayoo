(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{159:function(e,t,a){e.exports=a(385)},164:function(e,t,a){},166:function(e,t,a){},385:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(67),o=a.n(l),s=(a(164),a(2)),c=a(3),i=a(6),m=a(5),u=a(7),p=(a(166),a(390)),d=a(389),g=a(156),h=a(386),f=a(19),E=a.n(f),v=function e(){var t=this;Object(s.a)(this,e),this.signup=function(e,a){return t.service.post("/signup",{username:e,password:a}).then(function(e){return e.data})},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/currentuser").then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.upload=function(e){return t.service.post("/upload",{file:e}).then(function(e){return e.data})},this.edit=function(e,a,n,r,l,o){return t.service.post("/EditProfile",{username:e,image:a,description:n,gender:r,location:l,telephone:o}).then(function(e){return e.data})},this.service=E.a.create({baseURL:"".concat("https://yayoo-.herokuapp.com","/auth"),withCredentials:!0})},b=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleLogout=function(e){a.props.logout()},a.state={loggedInUser:null},a.service=new v,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(g.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){return this.state.loggedInUser?r.a.createElement("nav",{className:"navbar navbar-expand-lg nav-type"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item active nav-class"},r.a.createElement(h.a,{className:"nav-link nav-class",to:"/profile"},"Perfil")),r.a.createElement("li",{className:"nav-item active nav-class"},r.a.createElement(h.a,{className:"nav-link nav-class",to:"/Meetings"},"Quedadas")),r.a.createElement("li",{className:"nav-item active nav-class"},r.a.createElement(h.a,{className:"nav-link nav-class",to:"/Gallery"},"FotoNieto")),r.a.createElement("li",{className:"nav-item active nav-class"},r.a.createElement("button",{className:"btn btn-warning my-2 my-sm-0",type:"submit",onClick:this.handleLogout},"Logout")))):r.a.createElement("nav",{className:"navbar navbar-expand-lg nav-type"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item active nav-class"},r.a.createElement(h.a,{className:"nav-link nav-class",to:"/signup"},"Reg\xedstrate")),r.a.createElement("li",{className:"nav-item active nav-class"},r.a.createElement(h.a,{className:"nav-link nav-class",to:"/login"},"Logu\xe9ate"))))}}]),t}(n.Component),N=a(39),y=a(388),C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.signup(t,n).then(function(e){a.setState({username:"",password:"",redirect:!0}),a.props.getUser(e.user)}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(N.a)({},n,r))},a.state={username:"",password:""},a.service=new v,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(y.a,{to:"/profile"}):r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6",style:{marginTop:"15%"}},r.a.createElement("h3",null,"Reg\xedstrate"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"exampleFormControlInput1"},"Nombre de Usuario:"),r.a.createElement("input",{className:"form-control",id:"exampleFormControlInput1",type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"exampleInputPassword1"},"Contrase\xf1a:"),r.a.createElement("input",{className:"form-control",id:"exampleInputPassword1",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("button",{type:"submit",className:"btn btn-success",value:"Sign up"},"Subscr\xedbete"))),r.a.createElement("div",{className:"col-md-6",style:{marginTop:"8%"}},r.a.createElement("img",{src:"/images/YayooLogo.png",alt:"Yayoo Logo"}))))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.login(t,n).then(function(e){a.setState({username:t,password:n,error:!1,redirect:!0}),a.props.getUser(e)}).catch(function(e){a.setState({username:t,password:n,error:!0})})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(N.a)({},n,r))},a.state={username:"",password:"",redirect:!1},a.service=new v,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(y.a,{to:"/profile"}):r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6",style:{marginTop:"15%"}},r.a.createElement("h3",null,"Por favor, logu\xe9ate para entrar."),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"exampleFormControlInput1"},"Nombre de Usuario:"),r.a.createElement("input",{className:"form-control",id:"exampleFormControlInput1",type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"exampleInputPassword1"},"Contrase\xf1a:"),r.a.createElement("input",{className:"form-control",id:"exampleInputPassword1",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("button",{type:"submit",className:"btn btn-success",value:"Sign up"},"Logu\xe9ate")),r.a.createElement("h1",null,this.state.error?"Error":"")),r.a.createElement("div",{className:"col-md-6",style:{marginTop:"8%"}},r.a.createElement("img",{src:"/images/YayooLogo.png",alt:"Yayoo Logo"}))))}}]),t}(n.Component),O=function(){function e(){var t=this;Object(s.a)(this,e),this.getProfileProducts=function(e){return t.service2.get("/".concat(e)).then(function(e){return e.data})},this.service=E.a.create({baseURL:"".concat("https://yayoo-.herokuapp.com","/images"),withCredentials:!0}),this.service2=E.a.create({baseURL:"".concat("https://yayoo-.herokuapp.com","/EditProfile"),withCredentials:!0})}return Object(c.a)(e,[{key:"addPicture",value:function(e,t){var a=new FormData;return a.append("image",e),a.append("description",t),this.service.post("/",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data})}}]),e}(),x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){a.setState({user:a.props.user})},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.user,l=t.image;console.log(n);var o=new FormData;return o.append("image",l),o.append("username",n.username),o.append("description",n.description),o.append("gender",n.gender),o.append("location",n.location),o.append("telephone",n.telephone),E.a.post("".concat("https://yayoo-.herokuapp.com","/user/").concat(a.state.user._id),o,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}).then(function(e){return console.log(e),window.location.reload(),r.a.createElement(y.a,{to:"/Profile"})}).catch(function(e){return console.log("Error",e)})},a.handleChangeProf=function(e,t){var n=Object.assign({},a.state.user);n[t]=e.target.value,a.setState({user:n})},a.state={},a.service=new O,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.user;return t?r.a.createElement("div",null,r.a.createElement("h1",null,"Tu Perfil"),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6",style:{marginTop:"50px"}},r.a.createElement("div",{className:"img-prof",key:t._id},r.a.createElement("img",{src:t.image,className:"img-fix",alt:""}))),r.a.createElement("div",{className:"col-md-6",style:{marginTop:"50px"}},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"formGroupExampleInput"},"Nombre de Usuario"),r.a.createElement("input",{type:"text",className:"form-control",id:"formGroupExampleInput",name:"username",value:t.username,onChange:function(t){return e.handleChangeProf(t,"username")}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"formGroupExampleInput"},"Descripci\xf3n"),r.a.createElement("textarea",{className:"form-control",id:"formGroupExampleInput",name:"description",value:t.description,onChange:function(t){return e.handleChangeProf(t,"description")}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"formGroupExampleInput"},"G\xe9nero"),r.a.createElement("select",{className:"form-control",id:"formGroupExampleInput",name:"gender",value:t.gender,onChange:function(t){return e.handleChangeProf(t,"gender")}},r.a.createElement("option",{value:"-"},"-"),r.a.createElement("option",{value:"male"},"Hombre"),r.a.createElement("option",{value:"female"},"Mujer"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"formGroupExampleInput"},"Domicilio"),r.a.createElement("input",{className:"form-control",id:"formGroupExampleInput",name:"location",value:t.location,onChange:function(t){return e.handleChangeProf(t,"location")}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"formGroupExampleInput"},"Tel\xe9fono"),r.a.createElement("input",{className:"form-control",id:"formGroupExampleInput",name:"telephone",value:t.telephone,onChange:function(t){return e.handleChangeProf(t,"telephone")}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"formGroupExampleInput"},"Imagen"),r.a.createElement("input",{type:"file",className:"form-control",id:"formGroupExampleInput",name:"image",onChange:function(t){return e.setState({image:t.target.files[0]})}})),r.a.createElement("button",{className:"btn btn-success",type:"submit"},"Subir")))))):"Loading"}}]),t}(r.a.Component),j=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x,{user:this.props.userInSession}))}}]),t}(n.Component),I=a(46),w=a(41),S=Object(I.compose)(Object(I.withProps)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyCtFGWWXJyAzch--tvKAt82xqXSj7W383M",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}),w.withScriptjs,w.withGoogleMap)(function(e){var t,a="";return console.log(e.marker),e.marker&&(a=r.a.createElement(w.Marker,{position:{lat:e.marker[0].lat,lng:e.marker[0].lng}})),e.markers&&(t=e.markers.map(function(e,t){return r.a.createElement(w.Marker,{key:t,position:{lat:e.lat,lng:e.lng}})})),r.a.createElement(w.GoogleMap,{defaultZoom:14,defaultCenter:{lat:40.4169473,lng:-3.7057172},onClick:function(t){return e.onMarkerClick(t)}},t,a)}),M=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).getMarkers=function(){if(a.props.meetings&&a.props.meetings.length>0){var e=a.props.meetings.map(function(e){return{lat:e.location.coordinates[0],lng:e.location.coordinates[1]}});a.setState({markers:e})}},a.handleMarkerClick=function(e){a.setState({marker:[{lat:e.latLng.lat(),lng:e.latLng.lng()}]}),a.props.handleClick&&a.props.handleClick(e)},a.props=e,a.state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getMarkers()}},{key:"render",value:function(){return r.a.createElement(S,{onMarkerClick:this.handleMarkerClick,markers:this.state.markers,marker:this.state.marker})}}]),t}(r.a.PureComponent),U=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).getAllMeetings=function(){E.a.get("".concat("https://yayoo-.herokuapp.com","/meetings/")).then(function(t){e.setState({listOfMeetings:t.data})})},e.state={listOfMeetings:[]},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getAllMeetings()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Quedadas"),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},this.state.listOfMeetings.length>0?r.a.createElement(M,{id:"myMap",meetings:this.state.listOfMeetings}):""),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("button",{className:"btn btn-success btn-class"},r.a.createElement(h.a,{className:"btn-class",to:"/Createmeeting"},"Crea tu quedada")),r.a.createElement("div",null),r.a.createElement("div",null,r.a.createElement("div",null,this.state.listOfMeetings.map(function(e,t){return r.a.createElement("div",{key:e._id},r.a.createElement("p",null,e.name," "),r.a.createElement("p",null,e.description," "),r.a.createElement("p",null,e.place," "),r.a.createElement("p",null,e.date," "),r.a.createElement("p",null,e.time))})))))))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){a.setState({meetings:a.props.meetings})},a.handleFormSubmit=function(e){var t=a.state.meetings;t.lat=a.state.lat,t.lng=a.state.lng,e.preventDefault(),E.a.post("".concat("https://yayoo-.herokuapp.com","/meetings/"),{data:t}).then(function(e){console.log(e),a.setState({redirect:!0})}).catch(function(e){return console.log("Error",e)})},a.handleChangeProf=function(e,t){var n=Object.assign({},a.state.meetings);n[t]=e.target.value,a.setState({meetings:n})},a.handleClickMap=function(e){a.setState({lat:e.latLng.lat(),lng:e.latLng.lng()})},a.state={meetings:{},redirect:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(y.a,{to:"/Meetings"}):r.a.createElement("div",null,r.a.createElement("h2",null,"Crea tu quedada"),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6",style:{marginTop:"50px"}},r.a.createElement("form",{onSubmit:function(t){return e.handleFormSubmit(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"formGroupExampleInput"},"Nombre"),r.a.createElement("input",{className:"form-control",id:"formGroupExampleInput",type:"text",name:"name",onChange:function(t){return e.handleChangeProf(t,"name")}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"formGroupExampleInput"},"Descripci\xf3n"),r.a.createElement("textarea",{className:"form-control",id:"formGroupExampleInput",name:"description",onChange:function(t){return e.handleChangeProf(t,"description")}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"formGroupExampleInput"},"Lugar"),r.a.createElement("input",{className:"form-control",id:"formGroupExampleInput",type:"text",name:"place",onChange:function(t){return e.handleChangeProf(t,"place")}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"formGroupExampleInput"},"Fecha"),r.a.createElement("input",{className:"form-control",id:"formGroupExampleInput",type:"date",name:"date",onChange:function(t){return e.handleChangeProf(t,"date")}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"formGroupExampleInput"},"Hora:"),r.a.createElement("input",{className:"form-control",id:"formGroupExampleInput",type:"time",name:"time",onChange:function(t){return e.handleChangeProf(t,"time")},min:"8:00",max:"20:00",required:!0})),r.a.createElement("button",{className:"btn btn-success",type:"submit"},"Submit"))),r.a.createElement("div",{className:"col-md-6",style:{marginTop:"84px"}},r.a.createElement(M,{id:"myMap",handleClick:this.handleClickMap})))))}}]),t}(r.a.Component),G=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).getAllImages=function(){E.a.get("".concat("https://yayoo-.herokuapp.com","/images/"),{withCredentials:!0}).then(function(t){e.setState({listOfImages:t.data})})},e.state={},e.service=new O,e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.description,r=a.image;if(""===n||""===r)return this.setState({error:"Empty Description"});this.service.addPicture(r,n).then(function(e){t.getAllImages()})}},{key:"componentDidMount",value:function(){this.getAllImages()}},{key:"render",value:function(){var e=this,t="";this.state.listOfImages&&(t=this.state.listOfImages.map(function(e,t){return r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"card",style:{width:"32.3rem",margin:"10px"}},r.a.createElement("div",{className:"img-container",key:e._id},r.a.createElement("img",{className:"card-img-top img-fix",src:e.image,alt:""})),r.a.createElement("div",{className:"card-body"},r.a.createElement("h6",{className:"card-title"},e.user.username," "),r.a.createElement("h5",{className:"card-text"},e.description," "))))}));var a=this.state.error;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",null,"FotoNieto"),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("div",{className:"form-group",style:{marginTop:"50px"}},r.a.createElement("p",{style:{color:"red"}},a),r.a.createElement("label",{style:{padding:"8px"},for:"exampleFormControlTextarea1"},"Descripci\xf3n"),r.a.createElement("input",{className:"",id:"exampleFormControlTextarea1",rows:"3",type:"text",name:"description",onChange:function(t){return e.setState({description:t.target.value})}}),r.a.createElement("label",{style:{padding:"8px"},for:"exampleFormControlFile1"},"Imagen"),r.a.createElement("input",{className:" file",id:"exampleFormControlFile1",type:"file",name:"image",onChange:function(t){return e.setState({image:t.target.files[0]})}}),r.a.createElement("button",{className:"btn btn-success",onClick:function(t){return e.handleSubmit(t)}},"Compartir")))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},t)))}}]),t}(n.Component),F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).getTheUser=function(e){a.setState({loggedInUser:e})},a.logout=function(){a.service.logout().then(function(){a.setState({loggedInUser:null})})},a.state={loggedInUser:null},a.service=new v,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.service.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(t){e.setState({loggedInUser:!1})})}},{key:"render",value:function(){var e=this;return this.fetchUser(),this.state.loggedInUser?(console.log(this.state.loggedInUser),r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(b,{userInSession:this.state.loggedInUser,logout:this.logout})),r.a.createElement("div",null,r.a.createElement(p.a,{exact:!0,path:"/profile",render:function(){return r.a.createElement(j,{userInSession:e.state.loggedInUser})}}),r.a.createElement(p.a,{exact:!0,path:"/Meetings",render:function(){return r.a.createElement(U,null)}}),r.a.createElement(p.a,{exact:!0,path:"/Createmeeting",render:function(){return r.a.createElement(P,null)}}),r.a.createElement(p.a,{exact:!0,path:"/Gallery",render:function(){return r.a.createElement(G,null)}})))):r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(b,{userInSession:this.state.loggedInUser,logout:this.logout}),r.a.createElement(d.a,null,r.a.createElement(p.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(C,{getUser:e.getTheUser})}}),r.a.createElement(p.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(k,{getUser:e.getTheUser})}}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=a(387);o.a.render(r.a.createElement(L.a,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[159,2,1]]]);
//# sourceMappingURL=main.d2c18fb7.chunk.js.map